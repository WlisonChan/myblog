{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{719:function(s,t,a){\"use strict\";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"h4\",{attrs:{id:\"排查cpu-load过高\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#排查cpu-load过高\"}},[s._v(\"#\")]),s._v(\" 排查CPU Load过高\")]),s._v(\" \"),a(\"p\",[a(\"strong\",[s._v(\"原因分析：\")]),s._v(\" 代码存在死循环、bug等，也有可能是full gc次数增大。\")]),s._v(\" \"),a(\"p\",[a(\"strong\",[s._v(\"排查步骤：\")])]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"1、使用\"),a(\"code\",[s._v(\"top\")]),s._v(\"命令查看找到cpu占比最高的程序。\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"2、使用\"),a(\"code\",[s._v(\"ps -ef\")]),s._v(\"或者\"),a(\"code\",[s._v(\"jps -v\")]),s._v(\"进一步查看进程号。\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"3、定位到具体线程或者代码。（\"),a(\"code\",[s._v(\"ps -mp 进程 -o THREAD,tid,time\")]),s._v(\"）\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"4、将需要查找的线程ID转换位16进制格式。\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"5、\"),a(\"code\",[s._v(\"jstack 进程ID | grep tid(16进制进程ID小写英文)-A60\")]),s._v(\"。\")])])]),s._v(\" \"),a(\"p\",[a(\"strong\",[s._v(\"例子：\")])]),s._v(\" \"),a(\"p\",[s._v(\"1、写一段死循环代码，然后将它传进服务器\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-JAVA line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Main\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"static\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"void\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"main\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"String\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" args\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"int\")]),s._v(\" i \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"while\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n            i\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"++\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"System\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"out\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"println\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"i\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\")])]),a(\"p\",[s._v(\"2、编译成字节码，然后后台运行\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#编译成字节码文件\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"root@VM_0_10_centos ~\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# javac Main.Java\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#使用nohup后台运行，也可以直接java运行然后再开一个终端\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"root@VM_0_10_centos ~\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# nohup Java Main > text.log 2>& 1&\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\")])]),a(\"p\",[s._v(\"3、使用top查看。\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://markdown-1301775995.cos.ap-nanjing.myqcloud.com/image-20210302111114583.png\",alt:\"image-20210302111114583\"}})]),s._v(\" \"),a(\"p\",[s._v(\"4、jps -v查看进程\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"root@VM_0_10_centos ~\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# jps -v \")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5271\")]),s._v(\" Main\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5479\")]),s._v(\" Jps -Dapplication.home\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"/usr/Java/jdk1.8.0_271-amd64 -Xms8m\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\")])]),a(\"p\",[s._v(\"5、使用命令查看线程信息（ ps -mp 5271 -o THREAD,tid,time ）\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"root@VM_0_10_centos ~\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# ps -mp 5271 -o THREAD,tid,time\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token environment constant\"}},[s._v(\"USER\")]),s._v(\"     %CPU PRI SCNT WCHAN  \"),a(\"span\",{pre:!0,attrs:{class:\"token environment constant\"}},[s._v(\"USER\")]),s._v(\" SYSTEM   TID     TIME\\nroot     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"98.9\")]),s._v(\"   -    - -         -      -     - 00:01:54\\nroot      \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19\")]),s._v(\"    - futex_    -      -  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5271\")]),s._v(\" 00:00:00\\nroot     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"98.6\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19\")]),s._v(\"    - -         -      -  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5272\")]),s._v(\" 00:01:54\\nroot      \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.1\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19\")]),s._v(\"    - futex_    -      -  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5273\")]),s._v(\" 00:00:00\\nroot      \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19\")]),s._v(\"    - futex_    -      -  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5274\")]),s._v(\" 00:00:00\\nroot      \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19\")]),s._v(\"    - futex_    -      -  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5275\")]),s._v(\" 00:00:00\\nroot      \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19\")]),s._v(\"    - futex_    -      -  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5276\")]),s._v(\" 00:00:00\\nroot      \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.1\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19\")]),s._v(\"    - futex_    -      -  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5277\")]),s._v(\" 00:00:00\\nroot      \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19\")]),s._v(\"    - futex_    -      -  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5278\")]),s._v(\" 00:00:00\\nroot      \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19\")]),s._v(\"    - futex_    -      -  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5279\")]),s._v(\" 00:00:00\\nroot      \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0\")]),s._v(\"  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"19\")]),s._v(\"    - futex_    -      -  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5280\")]),s._v(\" 00:00:00\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\")])]),a(\"p\",[a(\"img\",{attrs:{src:\"https://markdown-1301775995.cos.ap-nanjing.myqcloud.com/image-20210302111319715.png\",alt:\"image-20210302111319715\"}})]),s._v(\" \"),a(\"p\",[s._v(\"6、使用jstack定位问题（\"),a(\"code\",[s._v(\"jstack 进程ID | grep tid(16进制进程ID小写英文)-A60\")]),s._v(\"。）\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://markdown-1301775995.cos.ap-nanjing.myqcloud.com/image-20210302111413686.png\",alt:\"image-20210302111413686\"}})])])}),[],!1,null,null,null);t.default=e.exports}}]);","extractedComments":[]}