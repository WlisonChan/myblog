(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{739:function(_,v,t){"use strict";t.r(v);var e=t(2),s=Object(e.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h4",{attrs:{id:"explain分析语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#explain分析语句"}},[_._v("#")]),_._v(" Explain分析语句")]),_._v(" "),t("p",[_._v("操作："),t("strong",[_._v("explain+SQL语句")]),_._v(" 命令来查看这些SQL语句的执行计划")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301775995.cos.ap-nanjing.myqcloud.com/image-20210312171007590.png",alt:"image-20210312171007590"}})]),_._v(" "),t("p",[t("strong",[_._v("字段含义：")])]),_._v(" "),t("p",[_._v("1、"),t("strong",[_._v("id：")]),_._v(" 唯一标识")]),_._v(" "),t("p",[_._v("2、"),t("strong",[_._v("select_type：")]),_._v(" 查询类型")]),_._v(" "),t("p",[_._v("3、"),t("strong",[_._v("table：")]),_._v(" 表名，如果表取了别名，则显示别名")]),_._v(" "),t("p",[_._v("4、"),t("strong",[_._v("partitions：")]),_._v(" 分区")]),_._v(" "),t("p",[_._v("5、"),t("strong",[_._v("type：")]),_._v(" 连接类型")]),_._v(" "),t("p",[_._v("6、"),t("strong",[_._v("possible_keys：")]),_._v(" 可能选择的索引")]),_._v(" "),t("p",[_._v("7、"),t("strong",[_._v("key：")]),_._v(" 实际选择的索引")]),_._v(" "),t("p",[_._v("8、"),t("strong",[_._v("key_len：")]),_._v(" 索引长度")]),_._v(" "),t("p",[_._v("9、"),t("strong",[_._v("ref：")]),_._v(" 索引引用的列")]),_._v(" "),t("p",[_._v("10、"),t("strong",[_._v("rows：")]),_._v(" 扫描的行数")]),_._v(" "),t("p",[_._v("11、"),t("strong",[_._v("filtered：")]),_._v(" 符合查询条件的数据百分比")]),_._v(" "),t("p",[_._v("12、"),t("strong",[_._v("Extra：")]),_._v(" 附加信息")]),_._v(" "),t("h5",{attrs:{id:"详细解析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#详细解析"}},[_._v("#")]),_._v(" 详细解析")]),_._v(" "),t("h6",{attrs:{id:"_1-常见的select-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-常见的select-type"}},[_._v("#")]),_._v(" （1）常见的select_type:")]),_._v(" "),t("ul",[t("li",[_._v("SIMPLE: 简单的select 查询，未使用union及子查询。")]),_._v(" "),t("li",[_._v("PRIMARY: 最外层的select查询。")]),_._v(" "),t("li",[_._v("SUBQUERY:  在select或者where中包含了子查询，子查询中的第一个select查询，不依赖于外部查询的结果集。")]),_._v(" "),t("li",[_._v("DEPENDENT SUBQUERY: 子查询中的第一个select查询，依赖于外部查询的结果集。")]),_._v(" "),t("li",[_._v("DERIVED: 用于from子句里有子查询的情况。MySQL会递归执行这些子查询， 把结果放在临时表里。")]),_._v(" "),t("li",[_._v("UNION: UNION 中的第二个或随后的select查询，不依赖于外部查询的结果集。")]),_._v(" "),t("li",[_._v("DEPENDENT UNION: UNION 中的第二个或随后的select 查询，依赖于外部查询的结果集。")]),_._v(" "),t("li",[_._v("UNCACHEABLE UNION: UNION 中的第二个或随后的 select 查询，属于不可缓存的子查询。")])]),_._v(" "),t("h6",{attrs:{id:"_2-table"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-table"}},[_._v("#")]),_._v(" （2）table：")]),_._v(" "),t("p",[_._v("表示当前这一行正在访问哪张表，如果SQL定义了别名，则展示表的别名")]),_._v(" "),t("h6",{attrs:{id:"_3-partitions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-partitions"}},[_._v("#")]),_._v(" （3）partitions")]),_._v(" "),t("p",[_._v("当前查询匹配记录的分区。对于未分区的表，返回null")]),_._v(" "),t("h6",{attrs:{id:"_4-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-type"}},[_._v("#")]),_._v(" （4）type：")]),_._v(" "),t("p",[_._v("表示关联类型或访问类型，即MySQL决定如何查找表中的行，查找数据行对应的大概范围。")]),_._v(" "),t("p",[_._v("依次从最优到最差的分别为："),t("code",[_._v("system > const > eq_ref > ref > fulltext > ref_or_null > index_merge > unique_subquery > index_subquery > range > index > ALL")])]),_._v(" "),t("p",[_._v("常见的type排序："),t("code",[_._v("system > const > eq_ref > ref > range > index > All")])]),_._v(" "),t("p",[t("strong",[_._v("NULL")]),_._v("：mysql能够在优化阶段分解查询语句，在执行阶段用不着再访问表或索引。")]),_._v(" "),t("p",[t("strong",[_._v("system：")]),_._v(" 该表只有一行，system是const类型的特例")]),_._v(" "),t("p",[t("strong",[_._v("const：")]),_._v(" 针对主键或唯一索引的等值查询扫描,，最多只返回一行数据。 const 查询速度非常快，因为它仅仅读取一次即可。")]),_._v(" "),t("p",[t("strong",[_._v("ref：")]),_._v(" 当满足索引的最左前缀规则，或者索引不是主键也不是唯一索引时才会发生。")]),_._v(" "),t("p",[t("strong",[_._v("index：")]),_._v(" 和ALL一样，不同就是mysql只需扫描索引树，这通常比ALL快一些。")]),_._v(" "),t("p",[t("strong",[_._v("ALL：")]),_._v(" 即全表扫描，mysql需要从头到尾去查找所需要的行。")]),_._v(" "),t("h6",{attrs:{id:"_5-possible-keys"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-possible-keys"}},[_._v("#")]),_._v(" （5）possible_keys")]),_._v(" "),t("p",[_._v("显示可能应用在这张表上的索引，一个或者多个，不一定被实际使用。")]),_._v(" "),t("h6",{attrs:{id:"_6-key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-key"}},[_._v("#")]),_._v(" （6）key")]),_._v(" "),t("p",[_._v("实际使用的索引，如果为null,则没有使用索引。")]),_._v(" "),t("h6",{attrs:{id:"_7-key-len"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-key-len"}},[_._v("#")]),_._v(" （7）key_len")]),_._v(" "),t("p",[_._v("显示mysql在索引里使用的字节数。")]),_._v(" "),t("p",[_._v("计算规则：")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("字符串")])]),_._v(" "),t("li",[t("ul",[t("li",[_._v("char(n)：n字节长度")])])]),_._v(" "),t("li",[t("p",[_._v("varchar(n)：2字节存储字符串长度，如果是utf-8，则长度 3n + 2")])]),_._v(" "),t("li",[t("p",[_._v("数值类型")])]),_._v(" "),t("li",[t("ul",[t("li",[_._v("tinyint：1字节")])])]),_._v(" "),t("li",[t("p",[_._v("smallint：2字节")])]),_._v(" "),t("li",[t("p",[_._v("int：4字节")])]),_._v(" "),t("li",[t("p",[_._v("bigint：8字节")])]),_._v(" "),t("li",[t("p",[_._v("时间类型")])]),_._v(" "),t("li",[t("ul",[t("li",[_._v("date：3字节")])])]),_._v(" "),t("li",[t("p",[_._v("timestamp：4字节")])]),_._v(" "),t("li",[t("p",[_._v("datetime：8字节")])]),_._v(" "),t("li",[t("p",[_._v("如果字段允许为 NULL，需要1字节记录是否为 NULL")])])]),_._v(" "),t("h6",{attrs:{id:"_8-ref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-ref"}},[_._v("#")]),_._v(" （8）ref")]),_._v(" "),t("p",[_._v("表示将哪个字段或常量和key列所使用的字段进行比较。")]),_._v(" "),t("h6",{attrs:{id:"_9-extra-只列举出常见的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-extra-只列举出常见的"}},[_._v("#")]),_._v(" （9）Extra（只列举出常见的）")]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("distinct：")]),_._v(" mysql当找到当前记录的匹配联合结果的第一条记录之后，就不再搜索其他记录了。")]),_._v(" "),t("li",[t("strong",[_._v("not exists：")]),_._v(" mysql在查询时做一个 left join优化时，当它在当前表中找到了和前一条记录符合 left join条件后，就不再搜索更多的记录了。")]),_._v(" "),t("li",[t("strong",[_._v("using filesort：")]),_._v(" mysql需要额外的做一遍从而以排好的顺序取得记录。排序程序根据连接的类型遍历所有的记录，并且将所有符合 where条件的记录的要排序的键和指向记录的指针存储起来。")]),_._v(" "),t("li",[_._v("**using temporary： ** mysql需要创建临时表存储结果以完成查询。这种情况通常发生在查询时包含了group by 和 order by 子句，它以不同的方式列出了各个字段。")]),_._v(" "),t("li",[t("strong",[_._v("using where：")]),_._v(" where子句将用来限制哪些记录匹配了下一个表或者发送给客户端。")])])])}),[],!1,null,null,null);v.default=s.exports}}]);