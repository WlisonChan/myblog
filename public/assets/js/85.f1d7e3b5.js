(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{743:function(t,e,a){"use strict";a.r(e);var v=a(2),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h4",{attrs:{id:"事务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事务"}},[t._v("#")]),t._v(" 事务")]),t._v(" "),a("p",[t._v("事务具有四个特性，分别是原子性、一致性、隔离性和持久性，简称事务的ACID特性；")]),t._v(" "),a("h5",{attrs:{id:"一、acid特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、acid特性"}},[t._v("#")]),t._v(" 一、ACID特性")]),t._v(" "),a("p",[a("strong",[t._v("A (atomicity)：")]),t._v(" 原子性：是指整个数据库事务是不可分割的工作单位，事务中的操作要么都发生，要么都不发生。")]),t._v(" "),a("p",[a("strong",[t._v("C (consistency)：")]),t._v(" 一致性：事务前后数据的完整性必须保持一致")]),t._v(" "),a("p",[a("strong",[t._v("I (isolation)：")]),t._v(" 隔离性：指的是并发环境中，多个并发事务之间要相互隔离")]),t._v(" "),a("p",[a("strong",[t._v("D (durability)：")]),t._v(" 持久性：是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的。")]),t._v(" "),a("h5",{attrs:{id:"二、事务的隔离级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、事务的隔离级别"}},[t._v("#")]),t._v(" 二、事务的隔离级别")]),t._v(" "),a("p",[t._v("事务并发处理带来的问题：")]),t._v(" "),a("p",[t._v("1、脏读：脏读是指一个事务读取到了另一事务未提交的数据,造成select前后数据不一致。")]),t._v(" "),a("p",[t._v("例子：前提a=1，事务A更新a为2，事务B读取a值")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("事务A")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("事务B")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("开始")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("开始")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("更新a=2")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("读取a值，a=2")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("某些原因，回滚a=1")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("结束")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("结束")])])])]),t._v(" "),a("p",[t._v("2、不可重复读：不可重复读指一个事务读取到了另一事务已提交的数据，造成select前后数据不一致。")]),t._v(" "),a("p",[t._v("例子：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("事务A")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("事务B")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("开始")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("开始")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("读取a=1")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("读取a=1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("更新a=2")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("结束事务")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("读取a=2")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("结束事务")])])])]),t._v(" "),a("p",[t._v("3、幻读：事务A 按照一定条件进行数据读取， 期间事务B 插入了相同搜索条件的新数据，事务A再次按照原先条件进行读取时，发现了事务B 新插入的数据。")]),t._v(" "),a("p",[t._v("例子:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("事务A")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("事务B")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("开始")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("开始")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("条件查询，select结果数据数为10")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("插入相同搜索条件的数据")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("提交，结束事务")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("条件查询，select结果数据数为11")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("结束")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})])])]),t._v(" "),a("p",[t._v("事务的隔离级别：")]),t._v(" "),a("p",[t._v("1、"),a("strong",[t._v("串行化(serializable)：")]),t._v(" 所有事务一个接着一个的执行。是最高的事务隔离级别，可以避免脏读、不可重复读与幻读。但是这种事务隔离级别效率低下，比较耗数据库性能，一般不使用；")]),t._v(" "),a("p",[t._v("2、"),a("strong",[t._v("可重复读(repeatable read)：")]),t._v(" 所有被select获取的数据都不能被修改，这样可以避免一个事务前后读取不一致的情况。但是无法避免幻读，因为其他事务不能更改所选的数据，但是可以新增数据。"),a("strong",[t._v("该等级是Mysql的默认隔离级别。")])]),t._v(" "),a("p",[t._v("3、"),a("strong",[t._v("读已提交(read committed)：")]),t._v(" 被读取的数据可以被其他事务修改。事务读取时获取读锁，但是读完之后立即释放（不需要等待事务的结束），写锁是事务提交之后才释放，释放读锁之后，就可能被其他事务修改数据。")]),t._v(" "),a("p",[t._v("4、"),a("strong",[t._v("读未提交(read uncommitted)：")]),t._v(" 一个事务可以读取另一个未提交事务的数据，最低级别，任何情况都无法保证。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("隔离级别")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("脏读")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("不可重复读")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("幻读")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("读未提交")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可能")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("读已提交")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不可能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可能")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("可重复读")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不可能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不可能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可能")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("串行化")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不可能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不可能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不可能")])])])])])}),[],!1,null,null,null);e.default=_.exports}}]);